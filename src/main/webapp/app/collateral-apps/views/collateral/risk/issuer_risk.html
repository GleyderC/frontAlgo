<div class="portlet light" ng-controller="IssuerRiskController">
    <div class="portlet light bordered" id="collateral-agreements">
        <div class="row">
            <div class="form-group col-md-4">
                <label class="col-sm-12 col-md-4 control-label">Legal Entity Point Of View</label>
                <div class="col-md-8">
                    <ui-select ng-model="legalEntityPO.selected" ng-change="filterIssuerRisk()" theme="select2" class="input-medium">
                        <ui-select-match placeholder="Select an option...">{{$select.selected.name}}
                        </ui-select-match>
                        <ui-select-choices repeat="legalEntityPO in legalEntitiesPO | filter: {name: $select.search, otherName: $select.search}">
                            <div ng-bind-html="legalEntityPO.name | highlight: $select.search"></div>
                            <small>OtherName:
                                <span ng-bind-html="''+legalEntityPO.otherName | highlight: $select.search"></span>
                            </small>
                        </ui-select-choices>
                    </ui-select>

                </div>
            </div>

            <div class="form-group col-md-4">
                <label class="col-sm-12 col-md-4 control-label">Filter By CounterParty</label>
                <div class="col-md-8">
                    <ui-select ng-model="legalEntityCounterParty.selected" ng-change="filterIssuerRisk()" theme="select2" class="input-medium">
                        <ui-select-match placeholder="Select an option...">{{$select.selected.name}}</ui-select-match>
                        <ui-select-choices
                                repeat="legalEntityCounterParty in legalEntitiesCounterParty | filter: {name: $select.search, otherName: $select.search} ">
                            <div ng-bind-html="legalEntityCounterParty.name | highlight: $select.search"></div>
                            <small>
                                otherName: <span
                                    ng-bind-html="''+legalEntityCounterParty.otherName | highlight: $select.search"></span>
                            </small>
                        </ui-select-choices>
                    </ui-select>

                </div>
            </div>

            <div class="form-group col-md-4">
                <label class="col-sm-12 col-md-3 centered control-label">Currency</label>
                <div class="col-md-9">
                    <ui-select ng-model="currency.selected" theme="select2" class="input-medium">
                        <ui-select-match placeholder="Select an option...">{{$select.selected.name}}
                        </ui-select-match>
                        <ui-select-choices repeat="currency in currencies | filter: $select.search">
                            <div ng-bind-html="currency.name | highlight: $select.search"></div>
                        </ui-select-choices>
                    </ui-select>

                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12 col-md-4">
                <div class="portlet-body">
                    <div id="gchart_pie_posted" style="text-align: center; height:250px;"></div>
                </div>
            </div>


            <div class="col-sm-12 col-md-4">
                <div class="portlet-body">
                    <div id="gchart_pie_received" style="text-align: center; height:250px;"></div>
                </div>
            </div>

            <div class="col-sm-12 col-md-4">
                <div class="portlet-body">
                    <div id="gchart_pie_available" style="text-align: center; height:250px;"></div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">

                <div class="table-scrollable">
                    <table class="table table-bordered table-hover">
                        <thead>
                        <tr>
                            <th>Issuer</th>
                            <th>Posted</th>
                            <th>Haircut</th>
                            <th>Received</th>
                            <th>Haircut</th>
                            <th>Available</th>
                            <th>Haircut</th>
                            <th>Rating</th>
                        </tr>
                        </thead>
                        <tbody ng-repeat="IssuerRisk in IssuersRisk | orderBy:'IssuerRisk.name'">
                        <tr>
                            <td>{{IssuerRisk.name}}</td>
                            <td class="success">{{IssuerRisk.postedAmount | currency:''}}</td>
                            <td>{{IssuerRisk.postedPerCent | number:2 }}%</td>

                            <td class="warning">{{IssuerRisk.receivedAmount | currency:''}}</td>
                            <td>{{IssuerRisk.receivedPerCent | number:2 }}%</td>

                            <td class="active">{{IssuerRisk.availableAmount | currency:''}}</td>
                            <td>{{IssuerRisk.availablePerCent | number:2 }}%</td>

                            <td>{{IssuerRisk.raiting}}</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
