<div class="row calculation" ng-controller="SimulationTradeProposalController">
    <div class="col-md-6">
        <div class="portlet light bordered">
            <div class="row">
                <div class="col-md-4" >
                    <label class="control-label">Product Family</label>
                    <ui-select ng-model="SimulationTradeProposal.ProductFamily.selected" ng-change="SimulationTradeProposal.filterProduct('ProductFamily', SimulationTradeProposal.ProductFamily.selected)" theme="select2" style="display: block;">
                        <ui-select-match placeholder="Select Product Family">{{$select.selected.name}}</ui-select-match>
                        <ui-select-choices repeat="ProductFamily in SimulationTradeProposal.ProductFamilies | filter: {name: $select.search}">
                            <div ng-bind-html="ProductFamily.name | highlight: $select.search"></div>
                            <small>
                                <span ng-bind-html="''+ProductFamily.description | highlight: $select.search"></span>
                            </small>
                        </ui-select-choices>
                    </ui-select>
                </div>
                <div class="col-md-4" >
                    <label class="control-label">Product Group</label>
                    <ui-select ng-model="SimulationTradeProposal.ProductGroup.selected" ng-change="SimulationTradeProposal.filterProduct('ProductGroup', SimulationTradeProposal.ProductGroup.selected)" theme="select2" style="display: block;">
                        <ui-select-match placeholder="Select Product Group">{{$select.selected.name}}</ui-select-match>
                        <ui-select-choices repeat="ProductGroup in SimulationTradeProposal.ProductGroups | filter: {name: $select.search}">
                            <div ng-bind-html="ProductGroup.name | highlight: $select.search"></div>
                            <small>
                                <span ng-bind-html="''+ProductGroup.description | highlight: $select.search"></span>
                            </small>
                        </ui-select-choices>
                    </ui-select>
                </div>
                <div class="col-md-4" >
                    <label class="control-label">Product Type</label>
                    <ui-select ng-model="SimulationTradeProposal.ProductType.selected" ng-change="SimulationTradeProposal.filterProduct('ProductType',SimulationTradeProposal.ProductType.selected)" theme="select2" style="display: block;">
                        <ui-select-match placeholder="Select Product Type">{{$select.selected.name}}</ui-select-match>
                        <ui-select-choices repeat="ProductType in SimulationTradeProposal.ProductTypes | filter: {name: $select.search}">
                            <div ng-bind-html="ProductType.name | highlight: $select.search"></div>
                            <small>
                                <span ng-bind-html="''+ProductType.description | highlight: $select.search"></span>
                            </small>
                        </ui-select-choices>
                    </ui-select>
                </div>
            </div>
            <div class="row">
                <div class="col-md-3">
                    <label class="control-label">Trade Type</label>
                    <ui-select ng-model="SimulationTradeProposal.TradeType.selected" name="swap-trade-type" theme="select2" style="display: block;">
                        <ui-select-match placeholder="Select Trade Type">{{$select.selected.name}}</ui-select-match>
                        <ui-select-choices
                                repeat="TradeType in SimulationTradeProposal.TradeTypes | filter: $select.search">
                            <div ng-bind-html="TradeType.name | highlight: $select.search"></div>
                        </ui-select-choices>
                    </ui-select>
                </div>
                <div class="col-md-3">
                    <label class="control-label">Trade Subtype</label>
                    <ui-select ng-model="SimulationTradeProposal.TradeSubType.selected" name="swap-trade-type" theme="select2" style="display: block;">
                        <ui-select-match placeholder="Select Trade SubType">{{$select.selected.name}}</ui-select-match>
                        <ui-select-choices
                                repeat="TradeSubType in SimulationTradeProposal.TradeSubTypes | filter: $select.search">
                            <div ng-bind-html="TradeSubtype.name | highlight: $select.search"></div>
                        </ui-select-choices>
                    </ui-select>
                </div>
                <div class="col-md-3" >
                    <label class="control-label">Notional</label>
                    <input type="text" class="form-control collateral-money input-small" style="height: 28px;
                    font-size: 11px;" placeholder="" ng-model="SimulationTradeProposal.Notional" ui-number-mask="0">
                </div>
                <div class="col-md-3">
                    <label class="control-label">Currency</label>
                    <ui-select ng-model="SimulationTradeProposal.currency.selected" id="swap-trade-currency" theme="select2" style="display: block;">
                        <ui-select-match placeholder="Select Currency">{{$select.selected.name}}</ui-select-match>
                        <ui-select-choices repeat="currency in SimulationTradeProposal.currencyList | filter: $select.search">
                            <div ng-bind-html="currency.name | highlight: $select.search"></div>
                            <small ng-bind-html="currency.key | highlight: $select.search"></small>
                        </ui-select-choices>
                    </ui-select>
                </div>
            </div>
            <div class="row">
                <div class="col-md-4">
                    <label class="control-label">Effective Date</label>
                    <div class="input-group">
                        <input placeholder="Effective Date" type="text" class="form-control" uib-datepicker-popup ng-model="SimulationTradeProposal.effectiveDate"
                               is-open="SimulationTradeProposal.effectivePopup.opened" datepicker-options="dateOptions"
                               ng-required="true" close-text="Close" ng-change="SimulationTradeProposal.dateChange(this)" style="height: 30px!important; font-size: 11px;" />
                        <span class="input-group-btn">
                            <button type="button" class="btn btn-default" ng-click="SimulationTradeProposal.openDatePicker('effective')" style="height: 30px!important;">
                                <i class="glyphicon glyphicon-calendar"></i>
                            </button>
                        </span>
                    </div>
                </div>
                <div class="col-md-4">
                    <label class="control-label">Termination Date</label>
                    <div class="input-group">
                        <input placeholder="Termination Date" type="text" class="form-control" uib-datepicker-popup ng-model="SimulationTradeProposal.terminationDate"
                               is-open="SimulationTradeProposal.terminationPopup.opened" datepicker-options="dateOptions"
                               ng-required="true" close-text="Close" ng-change="SimulationTradeProposal.dateChange(this)" style="height: 30px!important; font-size: 11px;" />
                        <span class="input-group-btn">
                        <button type="button" class="btn btn-default" ng-click="SimulationTradeProposal.openDatePicker('termination')" style="height: 30px!important;">
                            <i class="glyphicon glyphicon-calendar"></i>
                        </button>
                    </span>
                    </div>
                </div>

                <div class="col-md-3 ">
                    <label class="control-label"></label>
                    <span class="input-group-btn">
                        <button type="button" class="btn btn-default" ng-click="openDatePicker()"
                                uib-popover="Refresh Calculation" popover-trigger="mouseenter"
                                style="height: 30px!important;">
                            <i class="glyphicon glyphicon-refresh"></i>
                        </button>
                    </span>
                    <span class="input-group-btn">
                        <button type="button" class="btn btn-default" ng-click="openDatePicker()"
                                uib-popover="Save Trade" popover-trigger="mouseenter" style="height: 30px!important;">
                            <i class="glyphicon glyphicon-save"></i>
                        </button>
                    </span>
                </div>
            </div>
            <div class="row" style="margin-top: 10px; margin-left: 5px;">
                <div class="portlet-title col-md-6">
                    <div class="caption">
                        <img class="action-button-icon-sm" src="assets/pages/icons/swap/pay-leg.png">
                        <span class="caption-subject font-dark sbold uppercase" style="font-size: 12px;">Pay leg</span>
                    </div>
                    <form class="form-vertical" role="form" id="swap-pay-leg">
                        <div class="row" style="">
                            <label class="control-label">Leg Type</label>
                            <select name="payLegType" id="payLegType" ng-model="SimulationTradeProposal.PayLegType" ng-change="SimulationTradeProposal.filterLeg('pay')" class="form-control input-medium" style="height: 28px; font-size: 11px;">
                                <option ng-repeat="LegType in SimulationTradeProposal.LegTypes" value="{{LegType}}">{{LegType}}</option>
                            </select>
                        </div>
                        <div class="row" ng-if="SimulationTradeProposal.PayLegType == 'FLOATING'">
                            <label class="control-label">Index</label>
                            <ui-select ng-model="SimulationTradeProposal.SupportedIndex.selected" theme="select2" style="display: block;" class="input-medium">
                                <ui-select-match placeholder="">{{$select.selected.name}}</ui-select-match>
                                <ui-select-choices repeat="SupportedIndex in SimulationTradeProposal.SupportedIndexes | filter: {name: $select.search}">
                                    <div ng-bind-html="SupportedIndex.name | highlight: $select.search"></div>
                                </ui-select-choices>
                            </ui-select>
                        </div>
                        <div class="row" ng-if="SimulationTradeProposal.PayLegType == 'FLOATING'">
                            <label class="control-label">Tenor</label>
                            <ui-select ng-model="SimulationTradeProposal.PayTenor.selected" theme="select2" style="display: block;" class="input-medium">
                                <ui-select-match placeholder="">{{$select.selected.name}}</ui-select-match>
                                <ui-select-choices repeat="PayTenor in SimulationTradeProposal.PayTenors | filter: {name: $select.search}">
                                    <div ng-bind-html="PayTenor.name | highlight: $select.search"></div>
                                </ui-select-choices>
                            </ui-select>
                        </div>
                        <div class="row" ng-if="SimulationTradeProposal.PayLegType == 'FLOATING'">
                            <label class="control-label">Spread</label>
                            <input type="text" class="form-control collateral-money input-medium" style="height: 28px; font-size: 11px;" placeholder="" ng-model="SimulationTradeProposal.MarginCallDetail.marginCall.marginCallElementsByLiabilityType.CSA.marginCallCalculations.ownCalculatedExposure" ui-number-mask="2">
                        </div>
                        <div class="row" ng-if="SimulationTradeProposal.PayLegType == 'FIXED'">
                            <label class="control-label">Rate(%)</label>
                            <input type="text" class="form-control input-medium" style="height: 28px; font-size: 11px;" placeholder="" ng-model="SimulationTradeProposal.Rate">
                        </div>
                        <div class="row">
                            <label class="control-label">Basis</label>
                            <ui-select ng-model="SimulationTradeProposal.PayBasisCalculationConvention.selected" theme="select2" style="display: block;" class="input-medium">
                                <ui-select-match placeholder="">{{$select.selected.name}}</ui-select-match>
                                <ui-select-choices repeat="PayBasisCalculationConvention in SimulationTradeProposal.BasisCalculationConventions | filter: {name: $select.search}">
                                    <div ng-bind-html="PayBasisCalculationConvention.name | highlight: $select.search"></div>
                                </ui-select-choices>
                            </ui-select>
                        </div>
                        <div class="row">
                            <label class="control-label">Convention</label>
                            <ui-select ng-model="SimulationTradeProposal.PayConvention.selected" theme="select2" style="display: block;" class="input-medium">
                                <ui-select-match placeholder="">{{$select.selected.name}}</ui-select-match>
                                <ui-select-choices repeat="PayConvention in SimulationTradeProposal.PayConventions | filter: {name: $select.search}">
                                    <div ng-bind-html="PayConvention.name | highlight: $select.search"></div>
                                </ui-select-choices>
                            </ui-select>
                        </div>
                        <div class="row" ng-if="SimulationTradeProposal.PayLegType == 'FLOATING'">
                            <label class="control-label">Compounding Method</label>
                            <ui-select ng-model="SimulationTradeProposal.PayCompoundingMethod.selected"  theme="select2" style="display: block;" class="input-medium">
                                <ui-select-match placeholder="">{{$select.selected.name}}</ui-select-match>
                                <ui-select-choices repeat="PayCompoundingMethod in SimulationTradeProposal.PayCompoundingMethods | filter: {name: $select.search, description: $select.search}">
                                    <div ng-bind-html="PayCompoundingMethod.name | highlight: $select.search"></div>
                                    <small>Description:
                                        <span ng-bind-html="''+PayCompoundingMethod.description | highlight: $select.search"></span>
                                    </small>
                                </ui-select-choices>
                            </ui-select>
                        </div>
                        <div class="row">
                            <label class="control-label">Stub</label>
                            <ui-select ng-model="SimulationTradeProposal.PayStubType.selected" theme="select2" style="display: block;" class="input-medium">
                                <ui-select-match placeholder="">{{$select.selected.name}}</ui-select-match>
                                <ui-select-choices repeat="PayStubType in SimulationTradeProposal.PayStubTypes | filter: {name: $select.search}">
                                    <div ng-bind-html="PayStubType.name | highlight: $select.search"></div>
                                </ui-select-choices>
                            </ui-select>
                        </div>
                        <div class="row">
                            <label class="control-label">Payment Frequency</label>
                            <ui-select ng-model="SimulationTradeProposal.PayPaymentFrequency.selected" theme="select2" style="display: block;" class="input-medium">
                                <ui-select-match placeholder="">{{$select.selected.name}}</ui-select-match>
                                <ui-select-choices repeat="PayPaymentFrequency in SimulationTradeProposal.PayPaymentFrequencies | filter: {name: $select.search}">
                                    <div ng-bind-html="PayPaymentFrequency.name | highlight: $select.search"></div>
                                </ui-select-choices>
                            </ui-select>
                        </div>
                        <div class="row">
                            <label class="control-label">Roll Frequency</label>
                            <ui-select ng-model="SimulationTradeProposal.PayRollFrequency.selected"  theme="select2" style="display: block;" class="input-medium">
                                <ui-select-match placeholder="">{{$select.selected.name}}</ui-select-match>
                                <ui-select-choices repeat="PayRollFrequency in SimulationTradeProposal.PayRollFrequencies | filter: {name: $select.search}">
                                    <div ng-bind-html="PayRollFrequency.name | highlight: $select.search"></div>
                                </ui-select-choices>
                            </ui-select>
                        </div>
                        <div class="row">
                            <label class="control-label">Roll Convention</label>
                            <ui-select ng-model="SimulationTradeProposal.PayRollConvention.selected"  theme="select2" style="display: block;" class="input-medium">
                                <ui-select-match placeholder="">{{$select.selected.name}}</ui-select-match>
                                <ui-select-choices repeat="PayRollConvention in SimulationTradeProposal.PayRollConventions | filter: {name: $select.search}">
                                    <div ng-bind-html="PayRollConvention.name | highlight: $select.search"></div>
                                </ui-select-choices>
                            </ui-select>
                        </div>
                    </form>
                </div>
                <div class="col-md-6">
                    <div class="caption">
                        <img class="action-button-icon-sm" src="assets/pages/icons/swap/receive-leg.png">
                        <span class="caption-subject font-dark sbold uppercase" style="font-size: 12px;">Receive leg</span>
                    </div>
                    <form class="form-vertical" role="form" id="swap-receive-leg">
                        <div class="row" style="">
                            <label class="control-label">Leg Type</label>
                                <select name="receiveyLegType" id="receiveyLegType" ng-model="SimulationTradeProposal.ReceiveLegType" ng-change="SimulationTradeProposal.filterLeg('receive')" class="form-control input-medium" style="height: 28px; font-size: 11px;">
                                    <option ng-repeat="LegType in SimulationTradeProposal.LegTypes" value="{{LegType}}">{{LegType}}</option>
                                </select>
                        </div>
                        <div class="row" ng-if="SimulationTradeProposal.ReceiveLegType == 'FLOATING'">
                            <label class="control-label">Tenor</label>
                            <ui-select ng-model="SimulationTradeProposal.ReceiveTenor.selected"  theme="select2" style="display: block;" class="input-medium">
                                <ui-select-match placeholder="">{{$select.selected.name}}</ui-select-match>
                                <ui-select-choices repeat="ReceiveTenor in SimulationTradeProposal.ReceiveTenors | filter: {name: $select.search}">
                                    <div ng-bind-html="ReceiveTenor.name | highlight: $select.search"></div>
                                </ui-select-choices>
                            </ui-select>
                        </div>
                        <div class="row" ng-if="SimulationTradeProposal.ReceiveLegType == 'FLOATING'">
                            <label class="control-label">Spread</label>
                            <input type="text" class="form-control collateral-money input-medium" style="height: 28px; font-size: 11px;" placeholder="" ng-model="SimulationTradeProposal.ReceiveSpread" ui-number-mask="2">
                        </div>
                        <div class="row" ng-if="SimulationTradeProposal.ReceiveLegType == 'FIXED'">
                            <label class="control-label">Rate(%)</label>
                            <input type="text" class="form-control collateral-money input-medium" style="height: 28px; font-size: 11px;" placeholder="" ng-model="SimulationTradeProposal.ReceiveRate" ui-number-mask="2">
                        </div>
                        <div class="row">
                            <label class="control-label">Basis</label>
                            <ui-select ng-model="SimulationTradeProposal.ReceiveBasisCalculationConvention.selected" theme="select2" style="display: block;" class="input-medium">
                                <ui-select-match placeholder="">{{$select.selected.name}}</ui-select-match>
                                <ui-select-choices repeat="ReceiveBasisCalculationConvention in SimulationTradeProposal.BasisCalculationConventions | filter: {name: $select.search}">
                                    <div ng-bind-html="ReceiveBasisCalculationConvention.name | highlight: $select.search"></div>
                                </ui-select-choices>
                            </ui-select>
                        </div>
                        <div class="row">
                            <label class="control-label">Convention</label>
                            <ui-select ng-model="SimulationTradeProposal.ReceiveConvention.selected" theme="select2" style="display: block;" class="input-medium">
                                <ui-select-match placeholder="">{{$select.selected.name}}</ui-select-match>
                                <ui-select-choices repeat="ReceiveConvention in SimulationTradeProposal.ReceiveConventions | filter: {name: $select.search}">
                                    <div ng-bind-html="ReceiveConvention.name | highlight: $select.search"></div>
                                </ui-select-choices>
                            </ui-select>
                        </div>
                        <div class="row" ng-if="SimulationTradeProposal.ReceiveLegType == 'FLOATING'">
                            <label class="control-label">Compounding Method</label>
                            <ui-select ng-model="SimulationTradeProposal.ReceiveCompoundingMethod.selected"  theme="select2" style="display: block;" class="input-medium">
                                <ui-select-match placeholder="">{{$select.selected.name}}</ui-select-match>
                                <ui-select-choices repeat="ReceiveCompoundingMethod in SimulationTradeProposal.ReceiveCompoundingMethods | filter: {name: $select.search, description: $select.search}">
                                    <div ng-bind-html="ReceiveCompoundingMethod.name | highlight: $select.search"></div>
                                    <small>Description:
                                        <span ng-bind-html="''+ReceiveCompoundingMethod.description | highlight: $select.search"></span>
                                    </small>
                                </ui-select-choices>
                            </ui-select>
                        </div>
                        <div class="row">
                            <label class="control-label">Stub</label>
                            <ui-select ng-model="SimulationTradeProposal.ReceiveStubType.selected" theme="select2" style="display: block;" class="input-medium">
                                <ui-select-match placeholder="">{{$select.selected.name}}</ui-select-match>
                                <ui-select-choices repeat="ReceiveStubType in SimulationTradeProposal.ReceiveStubTypes | filter: {name: $select.search}">
                                    <div ng-bind-html="ReceiveStubType.name | highlight: $select.search"></div>
                                </ui-select-choices>
                            </ui-select>
                        </div>
                        <div class="row">
                            <label class="control-label">Payment Frequency</label>
                            <ui-select ng-model="SimulationTradeProposal.ReceivePaymentFrequency.selected"  theme="select2" style="display: block;" class="input-medium">
                                <ui-select-match placeholder="">{{$select.selected.name}}</ui-select-match>
                                <ui-select-choices repeat="ReceivePaymentFrequency in SimulationTradeProposal.ReceivePaymentFrequencies | filter: {name: $select.search}">
                                    <div ng-bind-html="ReceivePaymentFrequency.name | highlight: $select.search"></div>
                                </ui-select-choices>
                            </ui-select>
                        </div>
                        <div class="row">
                            <label class="control-label">Roll Frequency</label>
                            <ui-select ng-model="SimulationTradeProposal.ReceiveRollFrequency"  theme="select2" style="display: block;" class="input-medium">
                                <ui-select-match placeholder="">{{$select.selected.name}}</ui-select-match>
                                <ui-select-choices repeat="ReceiveRollFrequency in SimulationTradeProposal.ReceiveRollFrequencies | filter: {name: $select.search}">
                                    <div ng-bind-html="ReceiveRollFrequency.name | highlight: $select.search"></div>
                                </ui-select-choices>
                            </ui-select>
                        </div>
                        <div class="row">
                            <label class="control-label">Roll Convention</label>
                            <ui-select ng-model="SimulationTradeProposal.ReceiveRollConvention.selected"  theme="select2" style="display: block;" class="input-medium">
                                <ui-select-match placeholder="">{{$select.selected.name}}</ui-select-match>
                                <ui-select-choices repeat="ReceiveRollConvention in SimulationTradeProposal.ReceiveRollConventions | filter: {name: $select.search, description: $select.search}">
                                    <div ng-bind-html="ReceiveRollConvention.name | highlight: $select.search"></div>
                                    <small>Description:
                                        <span ng-bind-html="''+ReceiveRollConvention.description | highlight: $select.search"></span>
                                    </small>
                                </ui-select-choices>
                            </ui-select>
                        </div>
                    </form>
                </div>
            </div>

        </div>
    </div>
    <div class="col-md-6">
        <div class="portlet light bordered" style="margin-bottom:0;">
            <div class="row">
                <div class="col-md-4" >
                    <label class="control-label">Principal</label>
                    <ui-select ng-model="SimulationTradeProposal.Principal.selected" theme="select2" style="display: block;">
                        <ui-select-match placeholder="Select Principal">{{$select.selected.name}}</ui-select-match>
                        <ui-select-choices repeat="Principal in SimulationTradeProposal.Principals | filter: {name: $select.search, description: $select.search}">
                            <div ng-bind-html="Principal.name | highlight: $select.search"></div>
                            <small>
                                <span ng-bind-html="''+Principal.description | highlight: $select.search"></span>
                            </small>
                        </ui-select-choices>
                    </ui-select>
                </div>
                <div class="col-md-4" >
                    <label class="control-label">CounterParty</label>
                    <ui-select ng-model="SimulationTradeProposal.CounterParty.selected" theme="select2" style="display: block;">
                        <ui-select-match placeholder="Select CounterParty">{{$select.selected.name}}</ui-select-match>
                        <ui-select-choices repeat="CounterParty in SimulationTradeProposal.CounterParties | filter: {name: $select.search, description: $select.search}">
                            <div ng-bind-html="CounterParty.name | highlight: $select.search"></div>
                            <small>
                                <span ng-bind-html="'otherName:'+CounterParty.description | highlight: $select.search"></span>
                            </small>
                        </ui-select-choices>
                    </ui-select>
                </div>
                <div class="col-md-4" >
                    <label class="control-label">Strategy</label>
                    <ui-select ng-model="SimulationTradeProposal.Strategy.selected" theme="select2" style="display: block;">
                        <ui-select-match placeholder="Select Product Type">{{$select.selected.name}}</ui-select-match>
                        <ui-select-choices repeat="Strategy in SimulationTradeProposal.Strategies | filter: {name: $select.search, description: $select.search}">
                            <div ng-bind-html="Strategy.name | highlight: $select.search"></div>
                            <small>
                                <span ng-bind-html="''+Strategy.description | highlight: $select.search"></span>
                            </small>
                        </ui-select-choices>
                    </ui-select>
                </div>
            </div>
        </div>
    </div>

</div>
